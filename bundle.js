!function(){"use strict";const e=document.getElementById("app"),t=new class{state={};constructor(e){this.el=e,this.el.innerHTML="<div class='gameField'></div><div class='gameControls'></div>",this.onCC=(e,t)=>{},this.onGSC=e=>{},this.onFSC=(e,t)=>{};let t=this.el.querySelector(".gameControls"),i=document.createElement("button");i.innerHTML="Play",i.className="run-button run-button--stopped",i.addEventListener("click",(e=>{this.onGSC("Play"===i.innerHTML)})),t.appendChild(i);let l=document.createElement("input");l.type="number",l.className="field-size field-size--width",t.appendChild(l);let n=document.createElement("input");n.type="number",n.className="field-size field-size--height",t.appendChild(n),l.addEventListener("change",(e=>{this.onFSC(l.valueAsNumber,n.valueAsNumber)})),n.addEventListener("change",(e=>{this.onFSC(l.valueAsNumber,n.valueAsNumber)}))}updateGameField(e){let t=this.el.querySelector(".gameField");t.innerHTML="";let i=document.createElement("table");t.appendChild(i);for(let t=0;t<e.length;t++){let l=document.createElement("tr");i.appendChild(l);for(let i=0;i<e[t].length;i++){let n=document.createElement("td");1===e[t][i]?n.className="cell cell--alive":n.className="cell cell--dead",n.addEventListener("click",(e=>{this.onCC(i,t)})),l.appendChild(n)}}}updateGameState(e){this.state={...this.state,...e},"number"!=typeof this.state.width||isNaN(this.state.width)||(this.el.querySelector("input[type='number'].field-size.field-size--width").valueAsNumber=this.state.width),"number"!=typeof this.state.height||isNaN(this.state.height)||(this.el.querySelector("input[type='number'].field-size.field-size--height").valueAsNumber=this.state.height);let t=this.el.querySelector(".run-button");e.isRunning?(t.className="run-button run-button--runned",t.innerHTML="Stop"):(t.className="run-button run-button--stopped",t.innerHTML="Play")}onCellClick(e){this.onCC=e}onGameStateChange(e){this.onGSC=e}onFieldSizeChange(e){this.onFSC=e}}(e),i=new class{field=[];constructor(e=0,t=1){let i=[];for(let l=0;l<t;l++){i[l]=[];for(let t=0;t<e;t++)i[l][t]=0;this.field=i}}getAliveCellCount(e,t){let i=0;for(let l=t-1;l<=t+1;l++)for(let n=e-1;n<=e+1;n++)n===e&&l===t||1!==this.field[l]?.[n]||i++;return i}nextGeneration(){for(let e=0;e<this.field.length;e++)for(let t=0;t<this.field[e].length;t++){let i=this.getAliveCellCount(t,e);3===i&&0===this.field[e][t]&&(this.field[e][t]=1),3!==i&&2!==i&&1===this.field[e][t]&&(this.field[e][t]=0)}}getState(){return this.field}toggleCellState(e,t){1===this.field[t][e]?this.field[t][e]=0:this.field[t][e]=1}setSize(e,t){let i=[];for(let l=0;l<t;l++){i.push([]);for(let t=0;t<e;t++)void 0!==this.field[l]&&void 0!==this.field[l][t]?i[l][t]=this.field[l][t]:i[l][t]=0}this.field=i}}(5,5);new class{constructor(e,t,i){let l=e.getState();e.setSize(l[0].length,l.length),t.updateGameField(l),t.updateGameState({isRunning:!1,width:l[0].length,height:l.length}),t.onCellClick(((i,l)=>{e.toggleCellState(i,l),t.updateGameField(e.getState())})),t.onGameStateChange((l=>{l?(e.nextGeneration(),t.updateGameField(e.getState()),this.timerId=setInterval((()=>{e.nextGeneration(),t.updateGameField(e.getState())}),i)):(t.updateGameField(e.getState()),clearInterval(this.timerId)),t.updateGameState({isRunning:l})})),t.onFieldSizeChange(((i,l)=>{e.setSize(i,l),t.updateGameField(e.getState()),t.updateGameState({width:i,height:l})}))}}(i,t,1e3)}();
//# sourceMappingURL=bundle.js.map