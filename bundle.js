!function(){"use strict";const e=document.getElementById("app"),t=new class{state={};constructor(e){this.el=e,this.el.innerHTML="<div class='gameField'></div><div class='gameControls'></div>",this.onCC=(e,t)=>{},this.onGSC=e=>{},this.onFSC=(e,t)=>{};const t=this.el.querySelector(".gameControls"),i=document.createElement("button");i.innerHTML="Play",i.className="run-button run-button--stopped",i.addEventListener("click",(e=>{this.onGSC("Play"===i.innerHTML)})),t.appendChild(i);const n=document.createElement("input");n.type="number",n.className="field-size field-size--width",t.appendChild(n);const l=document.createElement("input");l.type="number",l.className="field-size field-size--height",t.appendChild(l),n.addEventListener("change",(e=>{this.onFSC(n.valueAsNumber,l.valueAsNumber)})),l.addEventListener("change",(e=>{this.onFSC(n.valueAsNumber,l.valueAsNumber)}));const s=document.createElement("input");s.type="range",s.className="field-range",t.appendChild(s)}updateGameField(e){const t=this.el.querySelector(".gameField");t.innerHTML="";const i=document.createElement("table");t.appendChild(i);for(let t=0;t<e.length;t++){const n=document.createElement("tr");i.appendChild(n);for(let i=0;i<e[t].length;i++){const l=document.createElement("td");1===e[t][i]?l.className="cell cell--alive":l.className="cell cell--dead",l.addEventListener("click",(e=>{this.onCC(i,t)})),n.appendChild(l)}}}updateGameState(e){this.state={...this.state,...e},"number"!=typeof this.state.width||isNaN(this.state.width)||(this.el.querySelector("input[type='number'].field-size.field-size--width").valueAsNumber=this.state.width),"number"!=typeof this.state.height||isNaN(this.state.height)||(this.el.querySelector("input[type='number'].field-size.field-size--height").valueAsNumber=this.state.height);const t=this.el.querySelector(".run-button");this.state.isRunning?(t.className="run-button run-button--runned",t.innerHTML="Stop"):(t.className="run-button run-button--stopped",t.innerHTML="Play")}onCellClick(e){this.onCC=e}onGameStateChange(e){this.onGSC=e}onFieldSizeChange(e){this.onFSC=e}}(e),i=new class{field=[];constructor(e=0,t=1){const i=[];for(let n=0;n<t;n++){i[n]=[];for(let t=0;t<e;t++)i[n][t]=0;this.field=i}}getAliveCellCount(e,t){let i=0;for(let n=t-1;n<=t+1;n++)for(let l=e-1;l<=e+1;l++)l===e&&n===t||1!==this.field[n]?.[l]||i++;return i}nextGeneration(){for(let e=0;e<this.field.length;e++)for(let t=0;t<this.field[e].length;t++){const i=this.getAliveCellCount(t,e);3===i&&0===this.field[e][t]&&(this.field[e][t]=1),3!==i&&2!==i&&1===this.field[e][t]&&(this.field[e][t]=0)}}getState(){return this.field}toggleCellState(e,t){1===this.field[t][e]?this.field[t][e]=0:this.field[t][e]=1}setSize(e,t){const i=[];for(let n=0;n<t;n++){i.push([]);for(let t=0;t<e;t++)void 0!==this.field[n]&&void 0!==this.field[n][t]?i[n][t]=this.field[n][t]:i[n][t]=0}this.field=i}}(5,5);new class{constructor(e,t,i){const n=e.getState();e.setSize(n[0].length,n.length),t.updateGameField(n),t.updateGameState({isRunning:!1,width:n[0].length,height:n.length}),t.onCellClick(((i,n)=>{e.toggleCellState(i,n),t.updateGameField(e.getState())})),t.onGameStateChange((n=>{n?(e.nextGeneration(),t.updateGameField(e.getState()),this.timerId=setInterval((()=>{e.nextGeneration(),t.updateGameField(e.getState())}),i)):(t.updateGameField(e.getState()),clearInterval(this.timerId)),t.updateGameState({isRunning:n})})),t.onFieldSizeChange(((i,n)=>{e.setSize(i,n),t.updateGameField(e.getState()),t.updateGameState({width:i,height:n})}))}}(i,t,1e3)}();
//# sourceMappingURL=bundle.js.map