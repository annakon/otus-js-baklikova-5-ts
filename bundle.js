!function(){"use strict";const e=document.getElementById("app"),t=new class{state={};constructor(e){this.el=e,this.el.innerHTML="<div class='gameField'></div><div class='gameControls'></div>",this.onCellClickCB=(e,t)=>{},this.onGameStateChangeCB=e=>{},this.onFieldSizeChangeCB=(e,t)=>{};const t=this.el.querySelector(".gameControls"),i=document.createElement("button");i.innerHTML="Play",i.className="run-button run-button--stopped",i.addEventListener("click",(e=>{this.onGameStateChangeCB("Play"===i.innerHTML)})),t.appendChild(i);let n=[document.createElement("input"),document.createElement("input")];for(let e=0;e<2;e++)n[e].type="number",n[e].className=0===e?"field-size field-size--width":"field-size field-size--height",t.appendChild(n[e]),n[e].addEventListener("change",(e=>{this.onFieldSizeChangeCB(n[0].valueAsNumber,n[1].valueAsNumber)}));const l=document.createElement("input");l.type="range",l.className="field-range",t.appendChild(l),l.addEventListener("change",(e=>{this.state.stepDurationMs=l.valueAsNumber}))}updateGameField(e){const t=this.el.querySelector(".gameField");t.innerHTML="";const i=document.createElement("table");t.appendChild(i);for(let t=0;t<e.length;t++){const n=document.createElement("tr");i.appendChild(n);for(let i=0;i<e[t].length;i++){const l=document.createElement("td");1===e[t][i]?l.className="cell cell--alive":l.className="cell cell--dead",l.addEventListener("click",(e=>{this.onCellClickCB(i,t)})),n.appendChild(l)}}}updateGameState(e){this.state={...this.state,...e},"number"!=typeof this.state.width||isNaN(this.state.width)||(this.el.querySelector("input[type='number'].field-size.field-size--width").valueAsNumber=this.state.width),"number"!=typeof this.state.height||isNaN(this.state.height)||(this.el.querySelector("input[type='number'].field-size.field-size--height").valueAsNumber=this.state.height);const t=this.el.querySelector("input[type='range']");"number"!=typeof e.stepDurationMs||isNaN(e.stepDurationMs)||(t.max=String(2*e.stepDurationMs),t.valueAsNumber=e.stepDurationMs);const i=this.el.querySelector(".run-button");this.state.isRunning?(i.className="run-button run-button--runned",i.innerHTML="Stop",t.disabled=!0):(i.className="run-button run-button--stopped",i.innerHTML="Play",t.disabled=!1)}onCellClick(e){this.onCellClickCB=e}onGameStateChange(e){this.onGameStateChangeCB=e}onFieldSizeChange(e){this.onFieldSizeChangeCB=e}getDuration(){return this.state.stepDurationMs}}(e),i=new class{field=[];constructor(e=0,t=1){const i=[];for(let n=0;n<t;n++){i[n]=[];for(let t=0;t<e;t++)i[n][t]=0;this.field=i}}getAliveCellCount(e,t){let i=0;for(let n=t-1;n<=t+1;n++)for(let l=e-1;l<=e+1;l++)l===e&&n===t||1!==this.field[n]?.[l]||i++;return i}nextGeneration(){let e=!1;for(let t=0;t<this.field.length;t++)for(let i=0;i<this.field[t].length;i++){const n=this.getAliveCellCount(i,t);3===n&&0===this.field[t][i]&&(0===this.field[t][i]&&(e=!0),this.field[t][i]=1),3!==n&&2!==n&&1===this.field[t][i]&&(1===this.field[t][i]&&(e=!0),this.field[t][i]=0)}return e}getState(){return this.field}toggleCellState(e,t){1===this.field[t][e]?this.field[t][e]=0:this.field[t][e]=1}setSize(e,t){const i=[];for(let n=0;n<t;n++){i.push([]);for(let t=0;t<e;t++)void 0!==this.field[n]&&void 0!==this.field[n][t]?i[n][t]=this.field[n][t]:i[n][t]=0}this.field=i}}(5,5);new class{constructor(e,t,i=1e3){const n=e.getState();e.setSize(n[0].length,n.length),t.updateGameField(n),t.updateGameState({isRunning:!1,width:n[0].length,height:n.length,stepDurationMs:i}),t.onCellClick(((i,n)=>{e.toggleCellState(i,n),t.updateGameField(e.getState())})),t.onGameStateChange((i=>{i?(e.nextGeneration(),t.updateGameField(e.getState()),this.timerId=setInterval((()=>{e.nextGeneration()?t.updateGameField(e.getState()):(clearInterval(this.timerId),t.updateGameState({isRunning:!1}))}),t.getDuration())):(t.updateGameField(e.getState()),clearInterval(this.timerId)),t.updateGameState({isRunning:i})})),t.onFieldSizeChange(((i,n)=>{e.setSize(i,n),t.updateGameField(e.getState()),t.updateGameState({width:i,height:n})}))}}(i,t,1e3)}();
//# sourceMappingURL=bundle.js.map